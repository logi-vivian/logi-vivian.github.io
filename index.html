<!doctype HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
    #testtext {color: white; font-family: 'Poppins', sans-serif;}


    </style>
    <link href="https://fonts.googleapis.com/css?family=Poppins&display=swap" rel="stylesheet">

</head>
<script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script>
<script src="https://rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
<script src="./aframe-particle-system-component/dist/aframe-particle-system-component.min.js"></script>
<script>
    var colors = ["#4dc9c3","#5559b0","#01b8ec", "#ff6e84"];
    var index = 0;

    var text;
    THREEx.ArToolkitContext.baseURL = 'https://rawgit.com/jeromeetienne/ar.js/master/three.js/';
    AFRAME.registerComponent('registerevents', {
        init: function () {
            var marker = this.el;
            marker.addEventListener('markerFound', function() {
                var markerId = marker.id;
                console.log('markerFound', markerId);
                text = marker.children[0];

                // document.getElementById("modal").style.backgroundColor = colors[index % 4];
                index+=1;

                document.getElementById("infoImg").src = text.getAttribute('data-infoImgSrc');


                document.getElementById("testtext").innerText = text.getAttribute('data-textValue');

            });
            marker.addEventListener('markerLost', function() {

            });
        }
    });
</script>

<body style='margin : 0px; overflow: hidden;'>

<div id="modal" style='position: absolute; width:70%; height: 40%; overflow: hidden; left: 15%; bottom: 10%; background-color: black; opacity: 0.8; text-align: center; z-index: 1;'>
<a href="cards.html"> <p>x</p> </a>
    <p id="testtext">      This is test text.</p>
<!--    <img src="melting.gif" width="20%" height="20%">-->
    <img src="" style="float: left;" id="infoImg" width="50%">

<!--    <img src="logilogo.png" width="25%" height="25%">-->





</div>



<!-- we add detectionMode and matrixCodeType to tell AR.js to recognize barcode markers -->
<a-scene id="scene" embedded arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>

    <a-assets>
        <a-asset-item id="animated-asset" src="https://raw.githubusercontent.com/nicolocarpignoli/nicolocarpignoli.github.io/master/ar-playground/models/CesiumMan.gltf"></a-asset-item>
    </a-assets>

    <a-assets>
        <a-asset-item id="cityModel" src="https://cdn.aframe.io/test-models/models/glTF-2.0/virtualcity/VC.gltf"></a-asset-item>
    </a-assets>


        <a-assets>
            <a-asset-item id="armodel2" src="./bowser/scene.gltf" scale="0.00001 0.00001 0.00001"></a-asset-item>
        </a-assets>









<!--    <a-marker type='barcode' value='0' registerevents>-->
<!--        <a-text id="text_zero" data-infoImgSrc="g910_1.png" data-textValue="Dummy text 1"></a-text>-->

<!--            <a-portal-door url='https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg' position='0 0 0' scale='0.7 1 0.7' rotation='0 90 0'><a-portal-door>-->

<!--    </a-marker>-->

    <a-marker id="animated-marker" type='barcode' value='1' registerevents>
        <a-text id="text_one" data-infoImgSrc="g910_2.png" data-textValue="Dummy text 2" font="roboto" material='opacity: 0.5;'></a-text>
        <a-entity animation="property: rotation; to:360 0 0; dur: 5000; easing: linear; loop: true" gltf-model="#armodel2" scale="0.2 0.2 0.2"></a-entity>
        <a-entity position="0 0 0" particle-system="color: #000,#FFF "></a-entity>


    </a-marker>



    <a-marker id="animated-marker" type='barcode' value='0' registerevents>
        <a-text id="text_one" data-infoImgSrc="g910_3.png" data-textValue="Dummy text 3" font="roboto" material='opacity: 0.5;'></a-text>
        <a-box position='0 0.5 0' material='opacity: 0.5; side: double;color:red;'>
            <a-torus-knot radius='0.26' radius-tubular='0.05'
                          animation="property: rotation; to:360 0 0; dur: 5000; easing: linear; loop: true">
            </a-torus-knot>
        </a-box>

    </a-marker>


    <!-- use this <a-entity camera> to support multiple-markers, otherwise use <a-marker-camera> instead of </a-marker> -->
    <a-entity camera></a-entity>
</a-scene>

<script>
    document.getElementById('helloworld').addEventListener('markerFound', function (event) {
        console.log('test');

    });
</script>
</body>
</html>
